# Stage environment overrides for baby-names
# These values override the defaults in values.yaml
# NOTE: Namespace and ServiceAccount are created by Terraform

namespace:
  name: baby-names-stage

serviceAccount:
  name: baby-names-stage

backend:
  image:
    tag: "main-latest" # Will be overridden by CD workflow with specific SHA
  env:
    DB_HOST: localhost
    DB_PORT: "5432"
    DB_NAME: baby_names
    DB_USER: bn-stage@extended-ascent-477308-m8.iam
    DB_IAM_AUTH: "true"

frontend:
  image:
    tag: "main-latest" # Will be overridden by CD workflow with specific SHA
  env:
    BACKEND_URL: http://baby-names-backend:5000

migration:
  image:
    tag: "main-latest" # Will be overridden by CD workflow with specific SHA
  env:
    DB_HOST: localhost
    DB_PORT: "5432"
    DB_NAME: baby_names
    DB_USER: bn-stage@extended-ascent-477308-m8.iam
    DB_IAM_AUTH: "true"

database:
  instanceConnectionName: "extended-ascent-477308-m8:europe-west1:baby-names-stage"
  iamAuth: true

ingress:
  enabled: true
  className: "gce"
  annotations:
    kubernetes.io/ingress.class: "gce"
  hosts:
    - host: ""  # Will be updated after ingress IP is assigned
      paths:
        - path: /
          pathType: Prefix
          backend: frontend
        - path: /api
          pathType: Prefix
          backend: backend
